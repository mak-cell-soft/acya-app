<h4>Liste des Bons de Transfert</h4>
<!-- Add this progress bar at the top of the page -->
<mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>
<div class="search">
    <div class="search-bar-container">
        <button mat-icon-button>
            <mat-icon>
                search
            </mat-icon>
        </button>
        <input (keyup)="applyFilter($event)" placeholder="Rechercher dans les Transferts" #input />
    </div>
    <div class="button-container">
        <mat-dialog-actions>
            <button mat-flat-button color="primary" [routerLink]="['add']">
                <mat-icon>
                    add
                </mat-icon>
                Ajouter
            </button>
        </mat-dialog-actions>
    </div>
</div>

<!-- Transfer List Table -->
<div class="table-container mat-elevation-z8">
    <table mat-table [dataSource]="allTransfersStock" matSort class="transfer-table">
        <!-- Doc Sortie Column -->
        <ng-container matColumnDef="docSortie" >
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Réf. Doc. Sortie</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">{{transfer.docSortie}}</td>
        </ng-container>

        <!-- Doc Reception Column -->
        <ng-container matColumnDef="docReception">
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Réf. Doc. Réception</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">{{transfer.docReception}}</td>
        </ng-container>

        <!-- Origin Column -->
        <ng-container matColumnDef="origine">
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Origine</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">{{transfer.origine}}</td>
        </ng-container>

        <!-- Destination Column -->
        <ng-container matColumnDef="destination">
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Destination</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">{{transfer.destination}}</td>
        </ng-container>

        <!-- Date Column -->
        <ng-container matColumnDef="transferDate">
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Date</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">
                {{transfer.transferDate | date:'dd/MM/yyyy'}}
            </td>
        </ng-container>

        <!-- Transporter Column -->
        <ng-container matColumnDef="transporter">
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Transporteur</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">{{transfer.transporter}}</td>
        </ng-container>

        <!-- Package Reference Column -->
        <ng-container matColumnDef="status" >
            <th mat-header-cell *matHeaderCellDef class="transfer-table-cell">Etat</th>
            <td mat-cell *matCellDef="let transfer" class="transfer-table-cell">
                <span class="status-badge" [ngClass]="'status-' + TransferStatus[transfer.status].toLowerCase()">
                    {{getStatusInfo(transfer.status).text}}
                </span>

            </td>
        </ng-container>

        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let transfer">
                <button mat-icon-button class="green-icon" color="primary" (click)="viewDetails(transfer)">
                    <mat-icon>visibility</mat-icon>
                </button>
                <button mat-icon-button class="red-icon" color="warn" (click)="deleteTransfer(transfer)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedStockTransferColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedStockTransferColumns;"></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="8">
                Aucun transfert trouvé "{{input.value}}"
            </td>
        </tr>
    </table>

    <mat-paginator [pageSizeOptions]="[5, 10, 20, 50, 100]"></mat-paginator>
</div>