<h1 mat-dialog-title class="dialog-title">
    <mat-icon class="title-icon">local_shipping</mat-icon>
    Confirmer le transfert
</h1>

<mat-progress-bar *ngIf="loading" mode="indeterminate"></mat-progress-bar>

<div mat-dialog-content class="dialog-content">
    <div class="detail-grid" *ngIf="!loading">
        <div class="half-width-wrapper">
            <div class="detail-item">
                <span class="detail-label">Doc. Sortie N°:</span>
                <span class="detail-value">{{ commonData.docSortie || 'N/A' }}</span>
            </div>

            <div class="detail-item">
                <span class="detail-label">Doc. Reception N°:</span>
                <span class="detail-value">{{ commonData.docReception || 'N/A' }}</span>
            </div>
        </div>

        <div class="half-width-wrapper">
            <div class="detail-item">
                <span class="detail-label">Dépôt Origine:</span>
                <span class="detail-value">{{ commonData.origine || 'N/A' }}</span>
            </div>

            <div class="detail-item">
                <span class="detail-label">Dépôt Destination:</span>
                <span class="detail-value">{{ commonData.destination || 'N/A' }}</span>
            </div>
        </div>

        <div class="full-width" *ngFor="let item of items">
            <div class="detail-item-full">
                <span class="detail-label-full">Marchandise:</span>
                <div class="detail-value-full">
                    <div>{{ getMerchandiseInfo(item).line1 }}</div>
                    <div>{{ getMerchandiseInfo(item).line2 }}</div>
                    <div style="font-weight: 500;">{{ getMerchandiseInfo(item).line3 }}</div>
                </div>
            </div>
        </div>

        <div class="half-width-wrapper">
            <div class="detail-item">
                <span class="detail-label">Date du transfert:</span>
                <span class="detail-value">{{ commonData.transferDate | date:'mediumDate' }}</span>
            </div>

            <div class="detail-item">
                <span class="detail-label">Transporteur:</span>
                <span class="detail-value">{{ commonData.transporter || 'N/A' }}</span>
            </div>
        </div>

        <div class="full-width">
            <mat-form-field appearance="outline" class="w-100">
                <mat-label>Commentaire</mat-label>
                <textarea matInput [(ngModel)]="comment" rows="3"
                    placeholder="Ajouter un commentaire (optionnel)"></textarea>
            </mat-form-field>
        </div>

    </div>
</div>

<mat-dialog-actions align="end">
    <button mat-flat-button (click)="onAbort()">Annuler</button>
    <button mat-flat-button (click)="onReject()" color="warn">Rejeter</button>
    <button mat-flat-button (click)="onConfirm()" color="primary" cdkFocusInitial
        [disabled]="loading">Confirmer</button>
</mat-dialog-actions>