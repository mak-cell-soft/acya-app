<h2 mat-dialog-title>Modifier le Client</h2>
<mat-dialog-content [formGroup]="customerForm">
    <div class="form-container">
        <!-- Type selection -->
        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Prefix</mat-label>
            <mat-select formControlName="selectedprefix">
                <mat-option *ngFor="let prefix of allPrefixes" [value]="prefix.id">
                    {{ prefix.id }} - {{ prefix.name }}
                </mat-option>
            </mat-select>
        </mat-form-field>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Prénom</mat-label>
                <input matInput formControlName="firstname">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Nom</mat-label>
                <input matInput formControlName="lastname">
            </mat-form-field>
        </div>

        <div *ngIf="isSociety" class="row">
            <mat-form-field appearance="outline">
                <mat-label>Nom Société</mat-label>
                <input matInput formControlName="name">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Description</mat-label>
                <input matInput formControlName="description">
            </mat-form-field>
        </div>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>CIN</mat-label>
                <input matInput formControlName="cin">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email">
            </mat-form-field>
        </div>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Téléphone 1</mat-label>
                <input matInput formControlName="phonenumberone">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Téléphone 2</mat-label>
                <input matInput formControlName="phonenumbertwo">
            </mat-form-field>
        </div>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Matricule Fiscal</mat-label>
                <input matInput formControlName="mfcode" (input)="onUpperCase($event, 'mfcode')">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Patente</mat-label>
                <input matInput formControlName="patentecode" (input)="onUpperCase($event, 'patentecode')">
            </mat-form-field>
        </div>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Encours Max</mat-label>
                <input matInput type="number" formControlName="maximumsalesbar">
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Remise Max (%)</mat-label>
                <input matInput type="number" formControlName="maximumdiscount">
            </mat-form-field>
        </div>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Solde d'Ouverture</mat-label>
                <input matInput type="number" formControlName="openingbalance">
                <span matSuffix>TND</span>
                <mat-hint>Balance initiale lors du démarrage du système</mat-hint>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Activité</mat-label>
                <mat-select formControlName="activity">
                    <mat-option *ngFor="let activ of societyActivities" [value]="activ.key">
                        {{activ.value}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full-width">
            <mat-label>Adresse</mat-label>
            <textarea matInput formControlName="address"></textarea>
        </mat-form-field>

        <div class="row">
            <mat-form-field appearance="outline">
                <mat-label>Banque</mat-label>
                <mat-select formControlName="bank">
                    <mat-option *ngFor="let bank of allBanks" [value]="bank.key">
                        {{bank.key}} - {{bank.value}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Compte Bancaire (RIB)</mat-label>
                <input matInput formControlName="bankaccount">
            </mat-form-field>
        </div>

        <div class="row">
            <mat-slide-toggle formControlName="istypeboth">Est un Fournisseur aussi</mat-slide-toggle>
        </div>
    </div>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button mat-button (click)="onCancel()">Annuler</button>
    <button mat-raised-button color="primary" (click)="onSave()" [disabled]="!customerForm.valid">Enregistrer</button>
</mat-dialog-actions>